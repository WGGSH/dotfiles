# --- å„ç¨®ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ  ---
# ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ é›†
# å¹²æ¸‰ã—ãã†ãªã®ã§ä¸€æ—¦ã‚„ã‚ã‚‹
# [[plugins]]
# repo = 'flazz/vim-colorschemes'

[[plugins]]
repo = 'xero/nord-vim-mod'

[[plugins]]
repo = 'joshdick/onedark.vim'

[[plugins]]
repo = 'haishanh/night-owl.vim'

[[plugins]]
repo = 'pineapplegiant/spaceduck'

[[plugins]]
repo = 'rakr/vim-one'

[[plugins]]
repo = 'ulwlu/elly.vim'

[[plugins]]
# repo = 'kaicataldo/material.vim'
repo = 'WGGSH/material.vim'
rev = 'custom_theme'
hook_add = '''
let g:material_theme_style = 'custom'
colorscheme material
let g:airline_theme = 'material'
'''

# --- Vim ç”¨ã®ã‚¢ã‚¤ã‚³ãƒ³ ---
[[plugins]]
repo = 'ryanoasis/vim-devicons'

# deoplete: è£œå®Œæ©Ÿèƒ½
[[plugins]]
repo = 'lighttiger2505/deoplete-vim-lsp'

[[plugins]]
repo = 'Shougo/deoplete.nvim'
# depends = ['lighttiger2505/deoplete-vim-lsp']
on_event = 'InsertCherPre'
hook_add = '''
let g:deoplete#enable_at_startup = 1
inoremap <expr><C-h> deoplete#smart_close_popup().'<C-h>'
inoremap <expr><BS> deoplete#smart_close_popup().'<C-h>'

call deoplete#custom#option({
  \ 'auto_complete': v:true,
  \ 'min_pattern_length': 2,
  \ 'auto_complete_delay': 0,
  \ 'auto_refresh_delay': 20,
  \ 'refresh_always': v:true,
  \ 'smart_case': v:true,
  \ 'camel_case': v:true,
\ })
let s:use_lsp_sources = ['lsp', 'dictionary', 'file']
call deoplete#custom#option('sources', {
  \ 'go': s:use_lsp_sources,
  \ 'python': s:use_lsp_sources,
  \ 'js': s:use_lsp_sources,
  \ 'vim': ['vim', 'buffer', 'dictionary', 'file'],
\})
'''

[[plugins]]
repo = 'prabirshrestha/vim-lsp'
hook_add = '''
" ãƒã‚¤ãƒ©ã‚¤ãƒˆè¨­å®š
let g:lsp_signs_enabled = 0           " enable signs
let g:lsp_diagnostics_echo_cursor = 1 " enable echo under cursor when in normal mode

" è¡Œé ­ã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒãƒ¼ã‚«ãƒ¼ã®æ–‡ç« 
" let g:lsp_diagnostics_signs_error       = {'text': 'X:'}
let g:lsp_diagnostics_signs_error       = {'text': 'ï—'}
" let g:lsp_diagnostics_signs_warning     = {'text': 'W:'}
let g:lsp_diagnostics_signs_warning     = {'text': 'ï±'}
" let g:lsp_diagnostics_signs_information = {'text': 'I:'}
let g:lsp_diagnostics_signs_information = {'text': 'â”'}
" let g:lsp_diagnostics_signs_hint        = {'text': 'H:'}
let g:lsp_diagnostics_signs_hint        = {'text': 'ğŸ’¡'}

let g:lsp_fold_enabled = 1


if !empty(globpath(&rtp, 'autoload/lsp.vim'))
  " vim-lspãŒæœ‰åŠ¹ã«ãªã£ãŸãƒãƒƒãƒ•ã‚¡ã§æ¬¡ã®è¨­å®šã‚’è¡Œã†
  function! s:on_lsp_buffer_enabled() abort
    " (å¿…é ˆ)ã‚ªãƒ ãƒ‹è£œå®Œã®é–¢æ•°ã‚’è¨­å®š
    setlocal omnifunc=lsp#complete
    " (ä»»æ„)è£œå®Œã®è¡¨ç¤ºã‚’ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã®ã¿ã«ã™ã‚‹
    setlocal completeopt=menu
    " (ä»»æ„)ã‚¨ãƒ©ãƒ¼åˆ—ã‚’å¸¸ã«è¡¨ç¤ºã™ã‚‹
    " setlocal signcolumn=yes
    " (ä»»æ„)å®šç¾©ã‚¸ãƒ£ãƒ³ãƒ—ã‚’gdã«å‰²ã‚Šå½“ã¦ã‚‹
    nmap <buffer> gd <plug>(lsp-definition)
  endfunction
  augroup lsp_install
    autocmd!
    autocmd User lsp_buffer_enabled
    \ call s:on_lsp_buffer_enabled()
  augroup END

  " (å¿…é ˆ)ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ«ãƒ¼ãƒˆã®ãƒãƒ¼ã‚«ãƒ¼ã¨ãªã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã€ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªä¸€è¦§
  " ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯Assembly-CSharp.csprojãŒå«ã¾ã‚Œã¦ã„ãªã„ãŸã‚ã€ã“ã‚Œã‚’è¿½åŠ ã™ã‚‹
  " ã‚³ãƒ¡ãƒ³ãƒˆ:ãªãã¦ã‚‚å‹•ã„ãŸã‚ˆã†ãªï¼Ÿ
  " let g:lsp_settings_root_markers = ['*.csproj', '.git', '.git/']
endif
'''

[[plugins]]
repo = 'mattn/vim-lsp-settings'

# gitã®å·®åˆ†è¡¨ç¤º
[[plugins]]
repo = "airblade/vim-gitgutter"
hook_add = '''
" airline ã®ã‚¿ãƒ–ç§»å‹•ã‚’é‚ªé­”ã•ã‚Œã‚‹ã®ã§ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã® nmap ã‚’å‰¥ãŒã™
nmap ghp <Plug>(GitGutterPreviewHunk)
nmap ghu <Plug>(GitGutterUndoHunk)
nmap ghs <Plug>(GitGutterStageHunk)

let g:gitgutter_sign_added = '+'
let g:gitgutter_sign_modified = '~'
let g:gitgutter_sign_removed = '-'
'''

# Airline
## æœ¬ä½“
[[plugins]]
repo = 'vim-airline/vim-airline'
# depends = ['vim-airline/vim-airline-themes', 'tpope/vim-fugitive']
hook_add = '''
" ã‚«ãƒ©ãƒ¼ã‚¹ã‚­ãƒ¼ãƒ 
" let g:airline_theme = 'oceanicnext'
" let g:airline_theme = 'onedark'

" ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆã®ã‚­ãƒ¼ãƒãƒƒãƒ—
nmap <Leader>h <Plug>AirlineSelectPrevTab
nmap <Leader>t <Plug>AirlineSelectNextTab

let g:airline#extensions#tabline#enabled = 1
let g:airline_powerline_fonts = 1
let g:airline#extensions#tabline#buffer_idx_mode = 1
let g:airline#extensions#whitespace#mixed_indent_algo = 1
let g:airline#extensions#branch#enabled = 1

if !exists('g:airline_symbols')
  let g:airline_symbols = {}
endif
" let g:airline_section_c = '%{STL()} %<%<%{airline#extensions#fugitiveline#bufname()}%m %#__accent_red#%{airline#util#wrap(airline#parts#readonly(),0)}%#__restore__#%#__accent_bold#%#__restore__#'
let g:airline_section_c = '%<%<%{airline#extensions#fugitiveline#bufname()}%m %#__accent_red#%{airline#util#wrap(airline#parts#readonly(),0)}%#__restore__#%#__accent_bold#%#__restore__# %{STL()}'
let g:airline_section_x = '%{strftime("%m/%d %H:%M")}'
" lsp ã®ã‚¨ãƒ©ãƒ¼ãƒ»è­¦å‘Šã‚’å–å¾—ã™ã‚‹
" let g:airline_section_z = '%3l:%2v %{airline#extensions#lsp#get_warning()} %{airline#extensions#lsp#get_error()}'
" let g:airline_section_z = '%3l:%2v %#accent_blue#%{airline#extensions#lsp#get_warning()}%#__restore__#%#__accent_yellow#%{airline#extensions#lsp#get_error()}%#__restore__#'

let g:airline#extensions#default#layout = [
 \ [ 'a', 'b', 'c'],
 \ [ 'y', 'z', 'x'],
 \ ]

" call airline#parts#define_accent('foo', 'red')
" let g:airline_section_a = airline#section#create(['mode', ' ', '%{airline#extensions#lsp#get_warning()}'])

let g:airline_section_z = airline#section#create(['linenr','maxlinenr','%{airline#extensions#lsp#get_warning()}','%{airline#extensions#lsp#get_error()}'])

 " ã‚»ãƒ‘ãƒ¬ãƒ¼ã‚¿
let g:airline_left_sep = 'î‚°'
let g:airline_left_alt_sep = 'î‚±'
let g:airline_right_sep = 'î‚²'
" let g:airline_right_sep = 'î‚²'
let g:airline_right_alt_sep = 'î‚³'

let g:airline_symbols.linenr = 'L'
let g:airline_symbols.maxlinenr = ''

let g:airline#extensions#tabline#ignore_bufadd_pat = 'gundo|undotree|vimfiler|tagbar|nerd_tree|startify|!'

" ã‚¨ãƒ©ãƒ¼ã‚·ãƒ³ãƒœãƒ« (lsp ã‚’ä½¿ç”¨)
let g:airline#extensions#lsp#error_symbol = 'ï— '
let g:airline#extensions#lsp#warning_symbol = 'ï± '
'''

## ãƒ†ãƒ¼ãƒ
[[plugins]]
repo = 'vim-airline/vim-airline-themes'

# git æ“ä½œ
# airline ã® git ãƒ–ãƒ©ãƒ³ãƒè¡¨ç¤ºã‚‚å¯èƒ½
[[plugins]]
repo = 'tpope/vim-fugitive'

# fugitive ã‹ã‚‰ãƒ–ãƒ©ã‚¦ã‚¶ã‚’é–‹ã‘ã‚‹ã‚ˆã†ã«ã™ã‚‹
[[plugins]]
repo = 'tpope/vim-rhubarb'

# Processingç”¨ãƒ—ãƒ©ã‚°ã‚¤ãƒ³
[[plugins]]
repo = 'sophacles/vim-processing'
on_ft = ["pde"]

# è‡ªå‹•ã§é–‰ã˜æ‹¬å¼§ã‚’ã¤ã‘ã‚‹
[[plugins]]
repo = 'cohama/lexima.vim'
on_event = 'InsertEnter'

# ä¸è¦ãªç©ºç™½ã®å¼·èª¿è¡¨ç¤º
[[plugins]]
repo = 'ntpeters/vim-better-whitespace'

# ã‚¤ãƒ³ãƒ‡ãƒ³ãƒˆã‚’è¦‹ã‚„ã™ãã™ã‚‹
[[plugins]]
repo = 'Yggdroot/indentLine'
hook_add = '''
let g:indentLine_char='â”‚'
let g:indentLine_defaultGroup = 'Comment'
'''



# ã‚³ãƒ¡ãƒ³ãƒˆã®ç°¡æ˜“æŒ¿å…¥
[[plugins]]
repo = 'tomtom/tcomment_vim'
hook_add = '''
let g:tcomment_mapleader1 = '<C-\>'
'''

[[plugins]]
repo = 'lambdalisue/gina.vim'

# æ¤œç´¢ã®æ‹¡å¼µ
[[plugins]]
repo = 'haya14busa/incsearch-fuzzy.vim'
depends = ['haya14busa/incsearch.vim']
hook_add = '''
nmap f <Plug>(incsearch-fuzzy-/)
'''

[[plugins]]
repo = 'haya14busa/incsearch.vim'

# ã‚¿ãƒ¼ãƒŸãƒŠãƒ«
[[plugins]]
repo = 'voldikss/vim-floaterm'
hook_add = '''
" nnoremap <silent><Space>r :FloatermNev --height=0.4 --width=0.7 --position=top fzf<CR>

if has ('win32')
  let g:floaterm_shell = 'powershell'
endif
let g:floaterm_wintype = 'floating'
let g:floaterm_wintype = 'TERM'
let g:floaterm_winblend = 20
let g:floaterm_position = 'bottom'
let g:floaterm_width = 0.6
let g:floaterm_height = 0.3
let g:floaterm_open_command = 'drop'
let g:floaterm_autoclose = 2
let g:floaterm_keymap_toggle = '<Space>k'
let g:floaterm_borderchars = ['â”', 'â”ƒ', 'â”', 'â”ƒ', 'â”', 'â”“', 'â”›', 'â”—']
'''
on_event = 'VimEnter'

# conflict-marker
# git ã®ã‚³ãƒ³ãƒ•ãƒªã‚¯ãƒˆç®‡æ‰€ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹
[[plugins]]
repo = 'rhysd/conflict-marker.vim'
hook_source = '''
let g:conflict_marker_highlight_group = ''
let g:conflict_marker_begin = '^<<<<<<< .*$'
let g:conflict_marker_end   = '^>>>>>>> .*$'
'''
on_event = 'VimEnter'

[[plugins]]
repo = 'APZelos/blamer.nvim'
hook_add = '''
let g:blamer_enabled = 1
let g:blamer_delay = 200
let g:blamer_prefix = '   î‚³î‚³   '
let g:blamer_template = '<committer-time> - <author> : <summary> : <commit-short>'
let g:blamer_date_format = '%y-%m/%d'
let g:blamer_show_in_visual_modes = 0
'''
on_event = 'VimEnter'

# toml ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒã‚¤ãƒ©ã‚¤ãƒˆ
[[plugins]]
repo = 'cespare/vim-toml'
on_ft = 'toml'

# Defx: ãƒ•ã‚¡ã‚¤ãƒ©ãƒ¼
# æœ¬ä½“
[[plugins]]
repo = 'Shougo/defx.nvim'
# depends = ['defx-icons']
on_cmd = 'Defx'
hook_add = '''
let g:defx_icons_enable_syntax_highlight = 1
let g:defx_icons_column_length = 1
nnoremap <silent><Leader>. :<C-u>Defx<CR>

let s:defx_win_width_percent = 0.3
let s:defx_win_width_min = 35
" let s:defx_win_height_percent = 0.5

let s:defx_win_width = float2nr(&columns * s:defx_win_width_percent) > s:defx_win_width_min ? s:defx_win_width_min : float2nr(&columns * s:defx_win_width_percent)

call defx#custom#option('_', {
      \ 'split'             : 'vertical',
      \ 'direction'         : 'topleft',
      \ 'columns'           : 'indent:git:icons:filename',
      \ 'show_ignored_files': 1,
      \ 'toggle'            : 1,
      \ 'resume'            : 1,
      \ 'winwidth'          : s:defx_win_width,
      \ 'buffer_name'       : 'explorer',
      \ })
autocmd FileType defx call s:defx_my_settings()

function! s:defx_my_settings() abort
  " Define mappings
  nnoremap <silent><buffer><expr> <CR>
    \ defx#do_action('open_or_close_tree')
  nnoremap <silent><buffer><expr> o
    \ defx#do_action('multi', ['drop', 'quit'])
  nnoremap <silent><buffer><expr> yy
    \ defx#do_action('yank_path')
  nnoremap <silent><buffer><expr> .
    \ defx#do_action('toggle_ignored_files')
  nnoremap <silent><buffer><expr> d
    \ defx#do_action('cd', ['..'])
  nnoremap <silent><buffer><expr> n
    \ defx#do_action('drop')
  nnoremap <silent><buffer><expr> q
    \ defx#do_action('quit')
  nnoremap <silent><buffer><expr> <Space>
    \ defx#do_action('toggle_select') . 'j'
  nnoremap <silent><buffer><expr> *
    \ defx#do_action('toggle_select_all')
  " ä¸Šä¸‹ç«¯ã§ç§»å‹•ã™ã‚‹ã¨åå¯¾å´ã«ãƒ«ãƒ¼ãƒ—
  nnoremap <silent><buffer><expr> h
    \ line('.') == line('$') ? 'gg' : 'j'
  nnoremap <silent><buffer><expr> t
    \ line('.') == 1 ? 'G' : 'k'
  nnoremap <silent><buffer><expr> <C-l>
    \ defx#do_action('redraw')
  nnoremap <silent><buffer><expr> <C-g>
    \ defx#do_action('print')
  nnoremap <silent><buffer><expr> cd
    \ defx#do_action('change_vim_cwd')
  nnoremap <silent><buffer><expr> s
    \ defx#do_action('open', 'vsplit')
endfunction
'''

## ã‚¢ã‚¤ã‚³ãƒ³
[[plugins]]
repo = 'kristijanhusak/defx-icons'

## git ã® status è¡¨ç¤º
[[plugins]]
repo ='kristijanhusak/defx-git'
hook_add = '''
let g:defx_git#indicators = {
  \ 'Modified'  : 'M ',
  \ 'Staged'    : '+ ',
  \ 'Untracked' : '- ',
  \ 'Renamed'   : 'R ',
  \ 'Unmerged'  : '',
  \ 'Deleted'   : 'D ',
  \ 'Unknown'   : '? '
    \ }
'''

# æŒ‡å®šã—ãŸç¯„å›²ã® syntax ã‚’å¤‰æ›´ã™ã‚‹
# ä¸»ã« dein.toml ã§ Vim Script ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹ç‚ºã«ä½¿ç”¨
[[plugins]]
repo = 'inkarkat/vim-SyntaxRange'

# Denite
[[plugins]]
repo = 'Shougo/denite.nvim'
hook_add = '''
let s:denite_win_width_percent = 0.8
let s:denite_win_height_percent = 0.4
call denite#custom#option('default', {
  \ 'split': 'floating',
  \ 'winwidth': float2nr(&columns * s:denite_win_width_percent),
  \ 'wincol': float2nr((&columns - (&columns * s:denite_win_width_percent)) / 2),
  \ 'winheight': float2nr(&lines * s:denite_win_height_percent),
  \ 'winrow': float2nr(&lines*(1 - s:denite_win_height_percent) - 2),
\ })

autocmd FileType denite call s:denite_my_settings()
  function! s:denite_my_settings() abort
    nnoremap <silent><buffer><expr> <CR>
      \ denite#do_map('do_action')
    nnoremap <silent><buffer><expr> p
      \ denite#do_map('do_action', 'preview')
    nnoremap <silent><buffer><expr> q
      \ denite#do_map('quit')
    nnoremap <silent><buffer><expr> i
      \ denite#do_map('open_filter_buffer')
    nnoremap <silent><buffer><expr> <Space>
      \ denite#do_map('toggle_select').'j'
endfunction
'''

# ãƒ¤ãƒ³ã‚¯ã—ãŸé ˜åŸŸã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆã™ã‚‹
[[plugins]]
repo = 'machakann/vim-highlightedyank'
hook_add = '''
let g:highlightedyank_highlight_duration = -1
'''

# ãƒ˜ãƒ«ãƒ—ã®æ—¥æœ¬èªåŒ–
[[plugins]]
repo = 'vim-jp/vimdoc-ja'

# é¸æŠç¯„å›²ã‚’ Google ç¿»è¨³ã§æ—¥æœ¬èªåŒ–ã™ã‚‹
[[plugins]]
repo = 'skanehira/translate.vim'


# auto format
## c# ã§ã¯ astyle ã®å°å…¥ã‚’å‰æ
## ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ä»¥ä¸‹ã‚’è¦å‚ç…§
## http://www.6809.net/tenk/html/lib/doc/astyle_j.htm
[[plugins]]
repo = 'vim-autoformat/vim-autoformat'
hook_add = '''
let g:formatdef_my_custom_cs = '"astyle --style=java -s2 -p -O --convert-tabs"'
let g:formatters_cs = ['my_custom_cs']

" ç¾çŠ¶ã¯ C# ã§ã®ã¿å®Ÿè¡Œ
augroup AutoFormat
  autocmd!
  autocmd BufWrite *.cs :Autoformat
augroup END
'''

# ã‚«ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ã®ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
[[plugins]]
repo = 'gorodinskiy/vim-coloresque'

# shader (hlsl)
[[plugins]]
repo = 'git@github.com:beyondmarc/hlsl.vim.git'

[[plugins]]
repo = 'tikhomirov/vim-glsl'
on_ft = ['vs', 'fs', 'shader']
hook_add = '''
autocmd! BufNewFile,BufRead *.vs,*.fs, set ft=glsl
autocmd! BufNewFile,BufRead *.shader set ft=hlsl
'''


# fzf (ä»Šã¯Winã§ã¯å‹•ã‹ã•ãªã„)
# fzf.vim : ãƒ•ã‚¡ã‚¤ãƒ«ã®ã‚¤ãƒ³ã‚¯ãƒªãƒ¡ãƒ³ã‚¿ãƒ«ã‚µãƒ¼ãƒ
[[plugins]]
repo = 'junegunn/fzf.vim'
depends = ['junegunn/fzf']
hook_add='''
" let g:fzf_preview_window = ['right:50%', 'ctrl-/']
nnoremap <Leader>r :FZF<CR>
'''

## fzfã®ãƒã‚¤ãƒŠãƒª
[[plugins]]
repo = 'junegunn/fzf'


# ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã®ãƒªã‚µã‚¤ã‚º
[[plugins]]
repo = 'simeji/winresizer'
hook_add = '''
let g:winresizer_vert_resize=1
let g:winresizer_horiz_resize=1
let g:winresizer_keycode_left=100
let g:winresizer_keycode_right=110
let g:winresizer_keycode_down=104
let g:winresizer_keycode_up=116
'''
